---
import Layout from '../layouts/main.astro';
---
<Layout>
	<div class="row">
		<div class="col-md-9 py-2">
			<div class="box">
				<h4>Welcome!</h4>
				<p>Welcome to fuzzyfuture.net ...!</p>
				<p>This site is very much still under construction. I plan on using it to host some scans... among other things.... not sure yet..</p>
			</div>
			<div class="box">
				<h4>About Me</h4>
				<p>I'm nate.</p>
			</div>
		</div>
		<div class="col-md-3 py-2 sidebar">
			<div class="lastfm">
					<small>now playing</small> <br />
					<a class="d-flex align-items-center" href="https://www.last.fm/user/natepilled" target="_blank">
						<img id="albumArt" class="d-inline-block" src="/img/albumart.jpg"></img>
						<div class="p-1 mb-2">
							<small id="song">Loading...</small> <br />
							<small id="artist">by Nate</small>
						</div>
					</a>
			</div>
			<div class="lastfm-credit text-end">
				<a href="https://github.com/biancarosa/lastfm-last-played" target="_blank"><small>last.fm api by biancarosa</small></a>
			</div>
    </div>
    <script type="text/javascript">
        let user = 'natepilled';
        let url = 'https://lastfm-last-played.biancarosa.com.br/' + user + '/latest-song';

        let songEl = document.querySelector('#song');
				let artistEl = document.querySelector('#artist');
				let imgEl = document.querySelector('#albumArt');

        fetch(url)
					.then(function (response) {
							return response.json()
					}).then(function (json) {
						let track = json['track'];
						
						songEl.innerHTML = track['name'];
						artistEl.innerHTML = 'by ' + track['artist']['#text'];

						if (track['image'][0]['#text'])
						imgEl.src = track['image'][0]['#text'];
					});
    </script>
		</div>
	</div>
</Layout>